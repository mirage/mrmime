<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mailbox (mrmime.Mrmime.Mailbox)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">mrmime</a> &#x00BB; <a href="../index.html">Mrmime</a> &#x00BB; Mailbox</nav><header class="odoc-preamble"><h1>Module <code><span>Mrmime.Mailbox</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#equals.">Equals.</a></li><li><a href="#pretty-printers.">Pretty-printers.</a></li><li><a href="#decoder-of-mailbox.">Decoder of mailbox.</a></li><li><a href="#encoder-of-mailbox.">Encoder of mailbox.</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="xref-unresolved">Emile</span>.mailbox</span></code></div><div class="spec-doc"><p>Type of mailbox. Normally, a mailbox is composed of two parts:</p><ul><li>an optional display name that indicates the name of the recipient (which can be a person or a system) that could be displayed to the user of a mail application, and</li><li>an <i>addr-spec</i> address enclosed in angle brackets (<code>&quot;&lt;&quot;</code> and <code>&quot;&gt;&quot;</code>).</li></ul><p>There is an alternate simple form of a mailbox where the <i>addr-spec</i> address appears alone, without the recipient's name or the angle brackets.</p></div></div><h3 id="equals."><a href="#equals." class="anchor"></a>Equals.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span>?case_sensitive:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-escape_string"><a href="#val-escape_string" class="anchor"></a><code><span><span class="keyword">val</span> escape_string : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>escape_string x</code> returns a safe <code>string</code> where control characters are escaped (<code>\x00</code>, <code>\x5c</code>, <code>\a</code>, <code>\b</code>, <code>\t</code>, <code>\n</code>, <code>\v</code>, <code>\f</code>, <code>\r</code> and <code>\x22</code> - double quote).</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Phrase"><a href="#module-Phrase" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Phrase/index.html">Phrase</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A phrase in the context of the mailbox is a <i>display-name</i> that indicates the name of the recipient. We provide an easily way to make it and keep conformances according standards.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Literal_domain"><a href="#module-Literal_domain" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Literal_domain/index.html">Literal_domain</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Domain"><a href="#module-Domain" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Domain/index.html">Domain</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A domain can be constructed in several ways. The most common way is:</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Local"><a href="#module-Local" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Local/index.html">Local</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Local part of a mailbox is a non-empty list of <a href="Local/index.html#val-word"><code>word</code></a> elements. You can construct local-part like this:</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : 
  <span>?name:<span class="xref-unresolved">Emile</span>.phrase <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Emile</span>.local <span class="arrow">&#45;&gt;</span></span>
  <span>?domains:<span><span class="xref-unresolved">Emile</span>.domain list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Emile</span>.domain <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make ?name local ?domains domain</code> returns a <code>mailbox</code> with local-part <code>local</code>, first domain <code>domain</code>, others domains <code>domains</code> (default is an empty list) and an optional name.</p><pre class="language-ocaml"><code>let me =
  make Local.(v [ w &quot;romain&quot;; w &quot;calascibetta&quot; ])
    ~domains:[ Domain.(v domain [ a &quot;gmail&quot;; a &quot;com&quot; ]) ]
    Domain.(v domain [ a &quot;x25519&quot;; a &quot;net&quot; ]) ;;
val me : t = ....
to_string me ;;
- : string = &quot;&lt;@gmail.com:romain.calascibetta@x25519.net&gt;&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(@)"><a href="#val-(@)" class="anchor"></a><code><span><span class="keyword">val</span> (@) : <span><span><span class="type-var">'a</span> <a href="Local/index.html#type-local">Local.local</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'b</span> <a href="Domain/index.html#type-t">Domain.t</a></span> * <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>@</code> operator constructs an usual e-mail address:</p><pre class="language-ocaml"><code>let me = Local.[ w &quot;romain&quot;; w &quot;calascibetta&quot; ] @ Domain.(domain, [ a &quot;x25519&quot;; a &quot;net&quot; ]) ;;
val me : t = { name= None
             ; local= [ `Atom &quot;romain&quot;; `Atom &quot;calascibetta&quot; ]
             ; domain= (`Domain [&quot;x25519&quot;; &quot;net&quot;], []) }
to_string me ;;
- : string = &quot;romain.calascibetta@x25519.net&quot;</code></pre><p>With only one domain and without a <i>display-name</i>. If you want to put multiple domains, you should use <a href="#val-make"><code>make</code></a> instead. If you want to put a <code>phrase</code>, you can use <code>with_phrase</code>.</p><p><code>@</code> operator can raise <code>Invalid_argument</code> where local-part or domain fail to normalize inputs according standards (see <a href="Local/index.html#val-make"><code>Local.make</code></a> and <a href="Domain/index.html#val-make"><code>Domain.make</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_name"><a href="#val-with_name" class="anchor"></a><code><span><span class="keyword">val</span> with_name : <span><span class="xref-unresolved">Emile</span>.phrase <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>with_name phrase t</code> put or replace <i>display name</i> of mailbox <code>t</code>.</p><pre class="language-ocaml"><code>let dbuenzli = with_name Phrase.(v [ w &quot;Daniel&quot;; e ~encoding:q &quot;Bünzli&quot; ]) dbuenzli
val dbuenzli : t = ...
(* Stringify dbuenzli! *)
to_string dbuenzli ;;
- : string = &quot;Daniel =?UTF-8?Q?B=C3=BCnzli?= &lt;daniel.buenzli@erratique.ch&gt;&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_string x</code> returns a string which represents <code>x</code> as is it in a e-mails.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span><span class="keyword">val</span> of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-t">t</a>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>of_string x</code> returns a <a href="#type-t"><code>t</code></a> from a well-formed string <code>x</code> according RFC 5322. A <i>mailbox</i> can have several forms and can include <code>FWS</code> tokens. Some examples of what is allowed:</p><ul><li><code>thomas@gazagnaire.org</code></li><li><code>Hannesm &lt;hannes@menhert.org&gt;</code></li><li><code>&lt;anil@recoil.org&gt;</code></li><li><code>Romain Calascibetta &lt;@gmail.com:romain.calascibetta@x25519.net&gt;</code></li><li><code>Daniel =?UTF-8?Q?B=C3=BCnzli?= &lt;daniel.buenzli@erratique.ch&gt;</code></li></ul><p>Any <i>encoded-word</i> are normalized to a valid UTF-8 string (even if <i>charset</i> is something else than <code>&quot;UTF-8&quot;</code>).</p></div></div><h3 id="pretty-printers."><a href="#pretty-printers." class="anchor"></a>Pretty-printers.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><h3 id="decoder-of-mailbox."><a href="#decoder-of-mailbox." class="anchor"></a>Decoder of mailbox.</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Decoder"><a href="#module-Decoder" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Decoder/index.html">Decoder</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="encoder-of-mailbox."><a href="#encoder-of-mailbox." class="anchor"></a>Encoder of mailbox.</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Encoder"><a href="#module-Encoder" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Encoder/index.html">Encoder</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>