<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Phrase (mrmime.Mrmime.Mailbox.Phrase)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../index.html">mrmime</a> &#x00BB; <a href="../../index.html">Mrmime</a> &#x00BB; <a href="../index.html">Mailbox</a> &#x00BB; Phrase</nav><header class="odoc-preamble"><h1>Module <code><span>Mailbox.Phrase</span></code></h1><p>A phrase in the context of the mailbox is a <i>display-name</i> that indicates the name of the recipient. We provide an easily way to make it and keep conformances according standards.</p><pre class="language-ocaml"><code>let name = Phrase.(v [ w &quot;Daniel&quot;; w &quot;B&quot; ]) ;;
val name : phrase
Phrase.to_string name ;;
- : string = &quot;Daniel B&quot;</code></pre><p>About special encoding/<i>charset</i>, a <code>`Word</code> can store a valid UTF-8 string. Otherwise, you can use an <a href="../../Encoded_word/index.html#type-t"><code>Encoded_word.t</code></a> to keep special characters:</p><pre class="language-ocaml"><code>let name = Phrase.(v [ w &quot;Daniel&quot;; e ~encoding:q &quot;Bünzli&quot; ]) ;;
- name : phrase
Phrase.to_string name ;;
- &quot;Daniel =?UTF-8?Q?B=C3=BCnzli?=&quot; : string</code></pre><p>NOTE: we accept only valid UTF-8 contents. Other <i>charset</i> (like <code>latin1</code>) are NOT allowed - we can compute them but we choose to never produce them.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-elt"><a href="#type-elt" class="anchor"></a><code><span><span class="keyword">type</span> elt</span><span> = </span><span>[ </span></code><ol><li id="type-elt.Dot" class="def variant constructor anchored"><a href="#type-elt.Dot" class="anchor"></a><code><span>| </span><span>`Dot</span></code></li><li id="type-elt.Word" class="def variant constructor anchored"><a href="#type-elt.Word" class="anchor"></a><code><span>| </span><span>`Word <span class="keyword">of</span> <span class="xref-unresolved">Emile</span>.word</span></code></li><li id="type-elt.Encoded" class="def variant constructor anchored"><a href="#type-elt.Encoded" class="anchor"></a><code><span>| </span><span>`Encoded <span class="keyword">of</span> string * <span class="xref-unresolved">Emile</span>.raw</span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = </span></code><ol><li id="type-t.[]" class="def variant constructor anchored"><a href="#type-t.[]" class="anchor"></a><code><span>| </span><span><span class="constructor">[]</span> : <span><span class="xref-unresolved">Mrmime__.Peano.z</span> <a href="#type-t">t</a></span></span></code></li><li id="type-t.::" class="def variant constructor anchored"><a href="#type-t.::" class="anchor"></a><code><span>| </span><span><span class="constructor">::</span> : <a href="#type-elt">elt</a> * <span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Mrmime__.Peano.s</span></span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Phrase, according RFC 5322, is a non-empty list of three elements (<a href="#type-elt"><code>elt</code></a>):</p><ul><li><code>`Dot</code> a dot surrounded by space</li><li><code>`Word w</code> a <a href="#val-word"><code>word</code></a></li><li><code>`Encoded e</code> an encoded-word</li></ul><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-o"><a href="#val-o" class="anchor"></a><code><span><span class="keyword">val</span> o : <a href="#type-elt">elt</a></span></code></div><div class="spec-doc"><p><a href="#val-o"><code>o</code></a> produces a <code>`Dot</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-w"><a href="#val-w" class="anchor"></a><code><span><span class="keyword">val</span> w : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-elt">elt</a></span></code></div><div class="spec-doc"><p><a href="#val-w"><code>w</code></a> produces a <b>safe</b> word. <a href="#val-w"><code>w</code></a> will try to escape control characters and verify if contents respects standards. Otherwise, <a href="#val-w"><code>w</code></a> raises an <code>Invalid_argument</code>. <code>`Word</code> produced by <a href="#val-w"><code>w</code></a> can be surrounded by double-quote.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-e"><a href="#val-e" class="anchor"></a><code><span><span class="keyword">val</span> e : <span><span class="label">encoding</span>:<a href="../../Encoded_word/index.html#type-encoding">Encoded_word.encoding</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-elt">elt</a></span></code></div><div class="spec-doc"><p><a href="#val-e"><code>e</code></a> is an alias of <a href="../../Encoded_word/index.html#val-make_exn"><code>Encoded_word.make_exn</code></a>. About <code>`Encoded</code> word, user can choose the way to encode the word. <a href="#val-b"><code>b</code></a> for a Base64 encoding or <a href="#val-q"><code>q</code></a> for a Quoted-Printable encoding. Both accept <b>only</b> UTF-8 contents - we don't accept any other <i>charset</i>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-q"><a href="#val-q" class="anchor"></a><code><span><span class="keyword">val</span> q : <a href="../../Encoded_word/index.html#type-encoding">Encoded_word.encoding</a></span></code></div><div class="spec-doc"><p>Quoted-Printable encoding.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-b"><a href="#val-b" class="anchor"></a><code><span><span class="keyword">val</span> b : <a href="../../Encoded_word/index.html#type-encoding">Encoded_word.encoding</a></span></code></div><div class="spec-doc"><p>Base64 encoding.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-word"><a href="#val-word" class="anchor"></a><code><span><span class="keyword">val</span> word : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-elt">elt</a>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>word x</code> tries to normalize <code>x</code> as a <code>`Word</code> according RFC 5322. It returns <code>Error</code> if <code>x</code> does not respect standards. If contents is an UTF-8 contents, <code>word</code> will surround <code>x</code> with double-quote and will escape control characters (see <a href="../index.html#val-escape_string"><code>escape_string</code></a>).</p><p>NOTE: UTF-8 is allowed in e-mails according RFC 6532.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-word_exn"><a href="#val-word_exn" class="anchor"></a><code><span><span class="keyword">val</span> word_exn : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-elt">elt</a></span></code></div><div class="spec-doc"><p>Same as <a href="#val-word"><code>word</code></a> but raises <code>Invalid_argument</code> instead to return <code>Error</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-coerce"><a href="#val-coerce" class="anchor"></a><code><span><span class="keyword">val</span> coerce : <span><span><span><span class="type-var">'a</span> <span class="xref-unresolved">Mrmime__.Peano.s</span></span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Emile</span>.phrase</span></code></div><div class="spec-doc"><p><code>coerce l</code> returns a valid and safe <code>phrase</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="xref-unresolved">Emile</span>.phrase, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>make l</code> returns a <code>phrase</code> only if <code>l</code> is a non-empty list.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-v"><a href="#val-v" class="anchor"></a><code><span><span class="keyword">val</span> v : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Emile</span>.phrase</span></code></div><div class="spec-doc"><p>Same as <a href="#val-make"><code>make</code></a> but raises an exception instead to return <code>Error</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><span class="xref-unresolved">Emile</span>.phrase <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_string x</code> returns a string which represents <code>x</code> as is it in a e-mails.</p></div></div></div></body></html>
